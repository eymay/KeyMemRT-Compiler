// RUN: heir-opt --loop-tiling %s | FileCheck %s

!Z536903681_i64 = !mod_arith.int<536903681 : i64>
!Z66813953_i64 = !mod_arith.int<66813953 : i64>
!Z66961409_i64 = !mod_arith.int<66961409 : i64>
!Z66994177_i64 = !mod_arith.int<66994177 : i64>
!Z67043329_i64 = !mod_arith.int<67043329 : i64>
!Z67239937_i64 = !mod_arith.int<67239937 : i64>
!cc = !openfhe.crypto_context
!ek = !openfhe.eval_key<index = 0 : index>
#inverse_canonical_encoding = #lwe.inverse_canonical_encoding<scaling_factor = 26>
#inverse_canonical_encoding1 = #lwe.inverse_canonical_encoding<scaling_factor = 1>
#key = #lwe.key<>
#map = affine_map<(d0)[s0] -> (d0 floordiv s0)>
#map1 = affine_map<(d0)[s0] -> (d0 mod s0)>
#map2 = affine_map<(d0)[s0] -> (d0 * s0)>
// CHECK-DAG: #[[MAP:.*]] = affine_map<(d0)[s0] -> (d0 floordiv s0)>
// CHECK-DAG: #[[MAP1:.*]] = affine_map<(d0)[s0] -> (d0 mod s0)>
// CHECK-DAG: #[[MAP2:.*]] = affine_map<(d0)[s0] -> (d0 * s0)>
#modulus_chain_L5_C5 = #lwe.modulus_chain<elements = <536903681 : i64, 67043329 : i64, 66994177 : i64, 67239937 : i64, 66961409 : i64, 66813953 : i64>, current = 5>
#ring_f64_1 = #polynomial.ring<coefficientType = f64, polynomialModulus = <1>>
#ring_f64_1_x8192 = #polynomial.ring<coefficientType = f64, polynomialModulus = <1 + x**8192>>
!rns_L5 = !rns.rns<!Z536903681_i64, !Z67043329_i64, !Z66994177_i64, !Z67239937_i64, !Z66961409_i64, !Z66813953_i64>
!pt = !lwe.new_lwe_plaintext<application_data = <message_type = tensor<16xf64>>, plaintext_space = <ring = #ring_f64_1, encoding = #inverse_canonical_encoding1>>
#ring_rns_L5_1_x8192 = #polynomial.ring<coefficientType = !rns_L5, polynomialModulus = <1 + x**8192>>
#ciphertext_space_L5 = #lwe.ciphertext_space<ring = #ring_rns_L5_1_x8192, encryption_type = mix>
!ct_L5 = !lwe.new_lwe_ciphertext<application_data = <message_type = tensor<16xf64>>, plaintext_space = <ring = #ring_f64_1_x8192, encoding = #inverse_canonical_encoding>, ciphertext_space = #ciphertext_space_L5, key = #key, modulus_chain = #modulus_chain_L5_C5>
module attributes {ckks.schemeParam = #ckks.scheme_param<logN = 13, Q = [536903681, 67043329, 66994177, 67239937, 66961409, 66813953], P = [67108864], logDefaultScale = 26>} {
  func.func @linear_transform(%cc: !cc, %ct: !ct_L5) -> !ct_L5 {
    %cst = arith.constant dense<"0x00000020D1CE0F3F000000A0EE5A84BF000000E0A94C91BF000000609024A1BF00000080C5878EBF000000A01C79F8BE00000080E5C3953F000000A06E8FA0BF00000040CF6B973F000000A0A69695BF000000C07B016BBF0000006080479FBF00000020EFA591BF00000020DC1B973F000000A09FF9903F00000060E86492BF00000040FCB596BF000000207ACD933F00000020C71AA1BF00000020318C5FBF0000000042349A3F000000C01EB3983F000000A06BDD7E3F00000080E3D6933F000000608C6782BF000000A057136ABF000000A032CB873F000000E0C38480BF00000080BFF684BF0000004045136ABF0000000085BC7A3F000000602713803F00000040C948A03F000000609B8EA03F0000004098A0923F00000000382E803F000000E095E8993F0000002082F1933F00000000C1A19A3F000000E0C5FC7BBF000000203643A1BF000000E0A83696BF000000A0DA8150BF000000E04D578F3F000000E00FD99BBF000000C0D368A13F000000E0A3139ABF000000C069B695BF000000E04DB5843F000000205587933F00000000EF1C48BF0000002026647E3F000000C0EBDF943F000000C0B6FB7FBF000000809ADE77BF000000C09D2D9CBF000000C0C2BB73BF00000040A40588BF000000202F508B3F000000C0DB1B9C3F000000E0B991A03F00000040D40346BF000000A02232843F00000020C39D72BF00000000E1279DBF000000406736A2BF00000040857592BF000000E04BD197BF000000A0B4289ABF000000C0741898BF000000E075453F3F00000040D40898BF00000020782071BF000000E01AFFA13F000000408E498CBF000000009C623ABF00000080F8289E3F00000080F71A7A3F000000A08E71903F00000080233F6F3F0000006006438FBF000000609C32913F00000040256A90BF00000000A5119FBF000000C0EFC49CBF000000804E36A23F00000000994D873F000000006135A2BF000000A038F194BF000000A0AA0D843F00000020CFDE94BF00000000222996BF0000002052BFA0BF000000A02D70A1BF000000608B8599BF000000C0AE3A9FBF000000405F719EBF00000000C116923F000000C02C9E7B3F000000A074D254BF00000020780E61BF000000C0B0E6793F00000060F1BB96BF00000040F58F9DBF000000A0E822853F000000402C4D953F000000001A5372BF000000209817A13F0000002052F19BBF000000007ACB90BF000000E0D8FBA0BF00000040D15798BF0000008090F88F3F000000205F8C92BF000000E088E1903F000000C0508D94BF000000006FBE99BF00000020965C9D3F00000000FEC19D3F000000A0EC2399BF00000080F1DD9DBF00000080D8E4973F000000603660983F00000080A807803F00000080AF7A36BF000000608FA288BF0000002026C9A13F000000E048F1653F000000005D21933F0000008083255FBF0000002084F1893F000000E045629FBF0000000049E07F3F000000C0F3EA8A3F00000020E0E65BBF000000604F58943F000000A09C826F3F0000004075A19DBF000000C013A87EBF000000E081859A3F000000A0D842983F000000C0279B75BF000000E065A89ABF000000A0CA0A84BF000000E009C259BF00000060B75C9B3F00000080D27874BF000000E01C4D923F00000040C23E8ABF000000A0572590BF00000040E8B392BF000000C0FBED9A3F0000008003A161BF000000204AD3813F0000000072D59DBF00000020923A9F3F000000A0A8657A3F000000801BB83B3F000000201871983F00000040A0806B3F00000040428E923F0000006086886DBF000000405CD9983F000000801DAAA0BF0000006085C5923F00000060C5058F3F000000A0CEB19D3F000000C0690983BF000000C0F5FB823F000000407B4A97BF0000002041B738BF000000406C1F94BF00000000277A8D3F0000002054D391BF000000A0130EA1BF000000E0902B9CBF000000A02A9695BF000000A0D4BA9FBF000000A0F2959E3F00000020C60689BF000000406EAB913F00000000C9FB98BF00000060008F96BF000000E0855E7F3F00000040222DA03F00000040272E973F00000000976C943F0000008011A07EBF000000606127963F00000040A149963F000000C01FE18ABF0000002018B49CBF00000080C03F85BF00000000FD6C9C3F0000006050A69B3F000000E0D54671BF00000080527274BF000000E069E4973F000000A0D8BA9BBF000000C0BECF9F3F000000A0B00D9D3F000000E0F1E69F3F00000020BB94913F00000020C780893F00000020315E313F00000020F5D192BF00000020EF63913F000000C0D6C483BF00000020631795BF000000407BE7653F0000006053937FBF000000E03A5C81BF000000E08A8E973F00000060DA18923F000000802EE8753F0000008085B8973F0000000027BF9CBF000000E0A19666BF000000A0D50F62BF0000006017DB8A3F000000C050AC623F000000007EF19E3F00000080CBA1973F000000A0200E95BF000000E06CE2A0BF000000A0E9F2983F000000C02EFD933F000000E0F74479BF00000060FBFC913F000000008A3A72BF000000601CF29B3F000000405D9A66BF000000A0019683BF000000A0DF3D8BBF00000080722F8DBF00000080CD94A13F00000020B24C96BF00000020784E98BF000000A0AC3892BF000000009410953F00000060DA15933F000000805A3AA2BF000000A022CA773F000000809AABA13F00000000422994BF00000060113E96BF000000206A1593BF000000A083098FBF000000E01966943F000000A0E09BA13F0000002025E8A0BF000000C0E52DA0BF000000607CE795BF00000080249E99BF000000A06ED7753F00000000DC489C3F000000A0B71D963F00000040054BA03F000000A078C456BF000000E0726D63BF00000000CB9F663F000000202629A0BF00000040BFA99C3F000000602B4D9CBF0000008047B58B3F0000000075D0853F0000002041C4483F00000040E8E56EBF000000C0426D9DBF0000000033789C3F000000A0DA7B503F00000060C38C8ABF000000C0507A9ABF00000000FA0B8F3F0000006058AF673F000000C0B3C6853F000000A0C85D8ABF000000602FB99EBF000000005C16953F0000008065F27CBF000000404E919F3F00000080410FA23F000000C031B2913F00000080136E9EBF000000C0FCC189BF000000E0AF5875BF000000C0171D823F000000000215563F00000080958E87BF00000040C31AA03F000000E04F31A0BF000000C0E0C09A3F00000020D7C1903F00000080F98B91BF000000A03C5A98BF00000060AEA79DBF00000080FF159B3F000000C07ED9613F000000A088C4A13F000000603208653F0000006038A9933F000000404A62933F000000C04D7A883F00000080B153993F00000000B44F7A3F000000E044F6953F00000080E69294BF0000008056D190BF000000C0D379923F0000006042FE93BF000000005B6C6DBF00000060051BA2BF0000000087B39CBF00000040E05274BF000000C0EED0833F0000004085C993BF000000C0434AA1BF000000600CAC9CBF0000000017F5873F000000C0E6DFA1BF00000000401FA1BF000000C0989684BF000000E0FAFF9CBF000000A082527EBF00000000A9A66CBF00000040DF7E6E3F000000608CFE9BBF000000E08EC67FBF000000E0AD29713F0000004066B1163F00000080D18D7EBF000000600D0292BF00000000C0539CBF000000C01F2282BF000000E009ED593F00000060BA8C96BF000000808B7C983F0000004013EE833F000000409CB9803F000000809E34863F00000020745A9FBF000000E0895D8FBF00000060501A933F00000020EFD68EBF0000000085D691BF000000A0E857813F00000020E3E0A03F00000000BD7E9C3F000000C0FC2081BF000000E06C449C3F00000020A8CEA13F0000008023D5933F000000A06E5499BF000000E047B68CBF00000020D29596BF000000E0003E963F0000002095E29CBF000000A04209A13F00000020F237793F000000000D66A0BF000000204963953F00000020884F8F3F000000C06E73943F00000060D0ED9B3F00000080D40272BF000000C052917ABF000000E04007A23F000000E0B964963F00000040698D9D3F0000000011329DBF000000003D6B6EBF000000A04D29A13F0000008056259CBF000000604F4C94BF000000804A2B9DBF000000E03FB99ABF000000C0ECCBA1BF000000E018EC553F000000E0199D523F00000060660C933F00000040AD11A03F000000E03E941FBF00000000B7EF933F000000807B189ABF000000806761A1BF000000601D6CA0BF000000A016C86CBF000000A05230A0BF00000000E4569A3F000000A0B003133F000000C0339977BF000000A00403973F000000A026D275BF000000807AED40BF000000C04249963F000000A0203263BF000000A08660943F000000A00552753F000000C016BBA13F000000E0C237A23F000000C03A29673F000000E0DBBE9BBF00000060989D85BF00000040DF6D70BF000000A0EAF996BF000000A09467713F000000A0096E733F000000608A2183BF00000000A4AFA0BF00000020CBCA92BF000000607D1B76BF00000080418C57BF000000C0779C39BF000000A0E2AAA13F000000A0C66C913F000000C01503833F000000A03EBF753F0000002079EE8D3F000000A0ACD084BF00000040E8C8A03F000000402F947E3F000000608088983F000000E023CF9A3F000000A063BA9CBF00000080F856273F000000E04E029F3F00000060003A9B3F000000E0331891BF00000040141286BF000000E06C9291BF000000A0B54E93BF00000080CF3C8FBF000000E05C68A13F000000E0B8ED8EBF00000040B8F060BF000000A0708B903F000000206ECB8A3F00000080DC66993F000000E0EE7B98BF00000040B160863F000000A027C242BF00000000533C813F000000A0A70F963F000000E051F5A13F000000C0AF1C93BF000000E0D3469E3F000000A0F1F05DBF000000C015C45FBF00000020A6BF85BF00000080AA1590BF00000040F3E1853F0000006091678BBF00000060CB3065BF000000E0F15C663F000000402CCC623F00000000622F94BF000000004BFD9F3F0000008067867D3F0000000086798B3F000000401866A13F00000000D4A3813F00000020D68A603F0000000081B8A0BF00000060C4C4933F000000408BA08C3F000000C08B28823F0000004038FA57BF000000409DEF79BF00000080154F8EBF000000E088EC0C3F00000000655477BF00000060C3E9913F000000A0CD12A0BF0000004091F39A3F0000002029335C3F000000E04AB8763F00000080DE2797BF0000004031F870BF00000040D132613F00000020C5AB973F00000080595B8EBF000000A058049BBF0000006063E586BF00000000BAAE9DBF00000080D452933F0000004085AA94BF00000080A2DE903F000000A000D7843F000000006439943F00000040B03144BF0000008056EB9E3F000000009C3B9ABF00000080C6A490BF000000009A009D3F000000A0A514923F000000A0490982BF000000A03F3C95BF00000000F7858D3F00000040B6757ABF000000E08D03A13F00000020D7AF913F00000080676496BF00000020ACBB933F000000400148983F0000004038EE96BF000000A0586F8ABF00000060D6E59D3F00000040CC4796BF0000004083F99BBF00000020562AA03F000000A0C36D8BBF000000807537933F0000000019E4A03F000000C05215A13F000000001D5F47BF000000800E2C8DBF00000040105A8B3F0000002015AE96BF000000008B318D3F00000020CD6D73BF000000404E50833F00000020CF95973F00000020F6B4833F0000002021CB8FBF000000403F8DA0BF0000008046A9843F000000C07E079EBF000000E087ECA03F000000C05EFD813F0000004025F4793F0000004075F2A03F000000600F448CBF000000E0ECA187BF000000E06FE081BF000000A0B416553F000000408AF398BF00000040E1A8953F00000060662AA03F000000400E685ABF0000006039CE82BF000000802CC090BF000000809A778DBF000000200B7F79BF000000201EE299BF000000C04DCC9C3F0000002010F698BF000000C080E897BF000000002A4A72BF00000040C80986BF000000803E8799BF00000060B57D793F000000E087078E3F000000A07F14923F00000000E832A13F000000A004B99F3F000000E0E2207ABF000000E065597BBF000000600010A0BF000000E0208893BF000000801C94933F000000802CFD913F000000006620743F00000020220CA23F000000A0F71188BF000000C014C182BF000000E012BA96BF000000004F8A9EBF000000E07203773F000000A0971C9E3F000000C06098A13F00000020C9DB86BF000000008BDD93BF0000000076139BBF000000A05D3FA03F0000002072796C3F00000060D3CE71BF000000001EE194BF00000040B24C94BF000000E0C23E6ABF000000000E5C93BF000000C0B482953F00000080369FA13F000000A092C69BBF00000080BEE1A03F00000040AC5CA13F000000A095957CBF000000E0030B823F000000A01087813F000000E0E4CD963F000000E0DFB2A13F000000C063139C3F000000A0F1D48ABF000000A00C2DA03F000000E01A488CBF00000060E5DF87BF000000409E4D93BF000000E0328B9D3F00000000E915873F000000A05FB08EBF000000605F76A03F000000E06742993F000000600F39853F000000A0370B963F000000602FBB963F000000209974753F000000208CA09E3F000000C0305B97BF00000080F771763F000000408F899D3F000000C081C79D3F00000000E2A4A1BF00000060C30787BF000000808B68903F00000060384E6E3F000000C0401FA0BF000000C0042F7FBF000000E0A501483F000000C0B62A98BF000000407BAA85BF000000E0BE228C3F0000002035698A3F00000060F0CDA03F000000E045347F3F000000402CB99E3F000000C08BC7A1BF00000060D401933F0000006029539C3F000000E0490F913F000000C0D5DE943F000000C08DE9A13F000000C06E06A2BF0000008000EF9EBF000000E0E1B08B3F00000020DB2B903F00000020C518953F0000004055C5933F00000040DB3A89BF0000006099E8913F0000000037EF82BF000000002100723F00000040019048BF000000C0D79A8E3F000000C07AFB81BF00000040B3C1A03F00000040903D543F000000C01701A23F000000202894943F00000020A6FC983F000000602215913F0000000083FD923F0000006085319EBF0000002011D096BF00000000B09F99BF00000040542676BF000000E0BA7AA13F000000006A49943F00000080435488BF000000202C2F813F00000040CF0999BF000000E075F490BF00000020AA4D9D3F000000203DEB953F00000060C6C8943F0000006074D49BBF000000806B23953F0000008086339C3F00000000D5F283BF000000205647993F00000080451D8B3F000000A0368E873F000000A05D9E88BF00000040A1BD743F000000E0006199BF000000403032843F00000060DFB490BF000000C0126077BF000000207039883F00000040BE6793BF000000403FA03EBF000000E0106F793F0000002057C870BF00000000D56870BF00000080CE91593F000000007A55623F00000060B7EA96BF00000020CF6C9ABF00000000CCAA90BF00000060859B98BF000000602B0692BF00000060DEFE843F000000C0F3BC9D3F000000A09B1E783F000000A0D239933F000000E096A69FBF000000A00552A13F000000208FC492BF000000807920A23F000000C0CED3613F000000A051AE9ABF00000000695089BF000000607FAD7ABF00000020B85658BF00000020583A983F0000006098D6953F00000000B725993F00000080E29C743F000000A04B0591BF00000020CE2089BF00000080E1887EBF00000060CA516FBF00000000221A82BF00000060DA4192BF000000E041A9943F000000C055C39DBF000000002A41A1BF000000604B9C78BF0000000069D6913F00000000BD1482BF000000A06CC8863F000000807AAB843F00000080A72E9F3F000000A0433F953F00000040B89BA03F0000006028E8933F000000C03F3593BF00000000A6BA77BF00000020ECD389BF00000080FFEF94BF000000A00275973F00000080FF348ABF0000002076669DBF000000803054733F00000080376B4ABF000000A0D35F8DBF000000803177773F000000206619673F000000E03F36873F00000020FD6BA0BF000000E034247BBF00000040E5869D3F0000004069B29BBF000000C00A55913F000000202ED0A0BF00000040BFC285BF000000C0B4DB973F000000407A488EBF000000E0DF53873F000000806CA2883F0000006053A768BF000000C09E50973F00000040F4698BBF00000040AC0D8DBF000000A03FE198BF000000001293A03F000000E0432B773F00000040AA6A91BF000000E00B298E3F000000E0EBFC903F000000C049E782BF0000006082B09DBF000000E0D19F823F000000C01C01813F0000002052FA833F00000000B2AE9DBF00000020DC6B86BF000000E037DC9BBF00000040235497BF000000203A7A8ABF0000000079F5903F000000E0FE8B513F000000005B2BA03F00000080D02C983F000000C059D08D3F00000020652E943F00000080D6419CBF00000080E052773F00000060464F883F000000E0B756753F000000409B4C9EBF000000C0F5E59DBF000000E087B58C3F0000004089189F3F000000C0D2CE1ABF0000004074239C3F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"> : tensor<128x16xf64>
    %extracted_slice = tensor.extract_slice %cst[0, 0] [1, 16] [1, 1] : tensor<128x16xf64> to tensor<16xf64>
    %pt = lwe.rlwe_encode %extracted_slice {encoding = #inverse_canonical_encoding1, ring = #ring_f64_1} : tensor<16xf64> -> !pt
    %ct_0 = openfhe.mul_plain %cc, %ct, %pt : (!cc, !ct_L5, !pt) -> !ct_L5
    %c11 = arith.constant 11 : index
    %ct_1 = affine.for %arg0 = 1 to 128 iter_args(%ct_2 = %ct_0) -> (!ct_L5) {
      // CHECK:       affine.for
      // CHECK:         affine.for
      // CHECK:         affine.apply #[[MAP]]
      // CHECK:         affine.apply #[[MAP1]]
      // CHECK:         affine.apply #[[MAP2]]
      // CHECK:         arith.index_cast
      // CHECK:         openfhe.deserialize_key_dynamic
      // CHECK:         openfhe.rot
      // CHECK:         openfhe.clear_key
      // CHECK:         arith.index_cast
      // CHECK:         openfhe.deserialize_key_dynamic
      // CHECK:         openfhe.rot
      // CHECK:         openfhe.clear_key
      %0 = affine.apply #map(%arg0)[%c11]
      %1 = affine.apply #map1(%arg0)[%c11]
      %2 = affine.apply #map2(%0)[%c11]
      %3 = arith.index_cast %2 : index to i32
      %ek = openfhe.deserialize_key_dynamic %cc, %3 : (!cc, i32) -> !ek
      %ct_3 = openfhe.rot %cc, %ct, %ek : (!cc, !ct_L5, !ek) -> !ct_L5
      openfhe.clear_key %cc, %ek : (!cc, !ek) -> ()
      %4 = arith.index_cast %1 : index to i32
      %ek_4 = openfhe.deserialize_key_dynamic %cc, %4 : (!cc, i32) -> !ek
      %ct_5 = openfhe.rot %cc, %ct_3, %ek_4 : (!cc, !ct_L5, !ek) -> !ct_L5
      openfhe.clear_key %cc, %ek_4 : (!cc, !ek) -> ()
      %extracted_slice_6 = tensor.extract_slice %cst[%arg0, 0] [1, 16] [1, 1] : tensor<128x16xf64> to tensor<16xf64>
      %pt_7 = lwe.rlwe_encode %extracted_slice_6 {encoding = #inverse_canonical_encoding1, ring = #ring_f64_1} : tensor<16xf64> -> !pt
      %ct_8 = openfhe.mul_plain %cc, %ct_5, %pt_7 : (!cc, !ct_L5, !pt) -> !ct_L5
      %ct_9 = openfhe.add %cc, %ct_2, %ct_8 : (!cc, !ct_L5, !ct_L5) -> !ct_L5
      affine.yield %ct_9 : !ct_L5
    }
    return %ct_1 : !ct_L5
  }
}
